project_signal_relay:
  summary: >
    Unified view of Automation and Recon projects: core objectives, current state,
    resolved inconsistencies, and prioritized next steps for Phase 28.

  resolutions:
    script_naming:
      mapping:
        "bar_directory_recon.py": "universal_recon/main.py"
        "email_notifier.py": "src/gmail_notifier.py"
        "motion_updater.py": "src/motion_task_creator.py"
      action: "Update all docs/configs to use real filenames or create 1-line shim scripts"
    environment_sync:
      python_version: "3.12.x (standardize across ASUS & Work Desktop)"
      env_pattern:
        - ".env.template"  # shared example
        - ".env.local"     # git-ignored per-machine override
      action: "Enforce interpreter in .vscode/settings.json; write sync_env_files.py"
    phase_management:
      current_phase: 28   # Phase 28 work has begun
      official_bump: "After merging feature/phase-27-ci-test-restoration into main"
      docs: "Create README_phase_28.md noting informal start on 2025-05-03"
    cleanup:
      remove_files:
        - "./python"       # zero-byte placeholder
        - "./python/"      # empty folder if unused
      gitignore: "Add python/ to .gitignore"
    copilot_setup:
      requirement:
        - "VS Code Insiders ≥1.99"
        - "Copilot Agent extension enabled"
      settings:
        - ".vscode/mcp.json"
        - ".vscode/settings.json (enable agentMode, set interpreter)"
    ci_prefect:
      current: "Prefect flows (git_auto_commit_flow.py) run locally via Task Scheduler"
      recommendation: "Add .github/workflows/flow_runner.yml to invoke flows on schedule"
    motion_api_migration:
      current: "motion_task_creator.py (email-based)"
      scaffold: "src/motion_task_via_api.py"
      env_var: "MOTION_API_TOKEN"
      action: "Update Prefect/task runner to use API script when token present"
    dashboard_deployment:
      current: "HTML overlays in /output/"
      host_options:
        - "GitHub Pages via docs/ folder"
        - "Netlify (optional)"
        - "Internal CI artifact download"
      action: "Add .github/workflows/dashboard_deploy.yml to push output/*.html to docs/"
    testing_enhancement:
      existing: 34 pytest tests passing
      gaps:
        - "risk_overlay_emitter.py"
        - "drift_dashboard_generator.py"
        - "plugin_usage_diff.py"
      lint: "Enable flake8-docstrings (D100–D103) post-Phase 28"
      action: "Write new tests under universal_recon/tests/ for overlay modules"

  tools_to_utilize:
    - "GitHub Copilot Agent"
    - "VS Code Insiders"
    - "Prefect 2 & Task Scheduler"
    - "GitHub Actions"
    - "Motion REST API"
    - "Gmail API"
    - "Docker (for CI containerization)"

  scripts_and_configs:
    - name: "sync_env_files.py"
      purpose: "Auto-copy .env.<host> → .env before runs"
    - name: "src/motion_task_via_api.py"
      purpose: "RESTful Motion task creation scaffold"
    - path: ".github/workflows/flow_runner.yml"
      purpose: "Schedule Prefect flows in CI"
    - path: ".github/workflows/dashboard_deploy.yml"
      purpose: "Deploy HTML dashboards to GitHub Pages"
    - name: "README_phase_28.md"
      purpose: "Document Phase 28 scope, hosting method, and setup"

  next_steps:
    - priority: 1
      task: "Merge feature/phase-27-ci-test-restoration into main; tag v0.27.0"
    - priority: 2
      task: "Delete zero-byte python file & empty python/ folder; update .gitignore"
    - priority: 3
      task: "Pin Python 3.12.x in .vscode/settings.json on both devices"
    - priority: 4
      task: "Implement and test sync_env_files.py; commit .env.template"
    - priority: 5
      task: "Add and test .github/workflows/flow_runner.yml for Prefect flows"
    - priority: 6
      task: "Scaffold and validate src/motion_task_via_api.py; update automation flow"
    - priority: 7
      task: "Add and verify .github/workflows/dashboard_deploy.yml for dashboards"
    - priority: 8
      task: "Write pytest tests for drift_dashboard_generator and risk_overlay_emitter"
    - priority: 9
      task: "Enable flake8-docstrings (D100–D103) in CI pre-commit config"
    - priority: 10
      task: "Create README_phase_28.md and announce Phase 28 kickoff"

  smart_strategies:
    - "Use Copilot Agent commands to auto-generate script stubs and CI configs"
    - "Leverage GitHub Actions and Pages for zero-infra static hosting"
    - "Containerize Prefect flows for portability and cloud-ready CI"
    - "Modularize CLI entry points to maintain backward compatibility"
    - "Automate environment sync to minimize manual errors"
